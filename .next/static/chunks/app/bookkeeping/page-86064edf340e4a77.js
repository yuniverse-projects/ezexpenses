(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{83686:()=>{},32383:()=>{},10643:(t,n,l)=>{Promise.resolve().then(l.bind(l,50650))},50650:(t,n,l)=>{"use strict";l.r(n),l.d(n,{default:()=>V});var a=l(95155),r=l(12115),i=l(68998),s=l(9552),o=l(9561),c=l(22282),d=l(64665),u=l(42479),h=l(10979),x=l(79214),p=l(47967),g=l(22678),f=l(20257),m=l(60615),A=l(69393),j=l(39905),v=l(90507),b=l(5329),C=l(91888),y=l(49234);let S={USD:1,CNY:.14,TWD:.032,EUR:1.07,CHF:1.12},w=(0,r.forwardRef)(function(t,n){let{onRecordsChange:l}=t,{t:s}=(0,x.Bd)(),[h,w]=(0,r.useState)("expense"),[D,k]=(0,r.useState)(""),[E,W]=(0,r.useState)("USD"),[M,I]=(0,r.useState)(""),[P,O]=(0,r.useState)(""),[F,N]=(0,r.useState)([]),[R,_]=(0,r.useState)(""),[T,B]=(0,r.useState)(null),L=(0,r.useRef)(!1);return(0,r.useImperativeHandle)(n,()=>({addTag(t){t&&!F.includes(t)&&N(n=>[...n,t])}})),(0,a.jsx)(d.A,{variant:"outlined",sx:{mb:3},children:(0,a.jsxs)(u.A,{children:[(0,a.jsx)(o.A,{variant:"h6",sx:{mb:2},children:s("addRecord")}),(0,a.jsxs)(i.A,{component:"form",onSubmit:function(t){if(t.preventDefault(),!D||!M){alert(s("pleaseFillAll"));return}let n=Date.now(),a=S[E]||1,r=parseFloat(D),i={id:n,createdAt:n,updatedAt:n,type:h,amount:r,currency:E,convertedUSD:r*a,date:M,tags:[...F],note:R.trim()};(0,p.$1)(i),B(i),k(""),I(""),O(""),N([]),_(""),null==l||l()},sx:{display:"flex",flexWrap:"wrap",alignItems:"flex-start",gap:2},children:[(0,a.jsx)(g.A,{children:(0,a.jsxs)(f.A,{row:!0,value:h,onChange:t=>w(t.target.value),children:[(0,a.jsx)(m.A,{value:"expense",control:(0,a.jsx)(A.A,{}),label:s("expense")}),(0,a.jsx)(m.A,{value:"income",control:(0,a.jsx)(A.A,{}),label:s("income")})]})}),(0,a.jsx)(j.A,{type:"number",label:s("amount"),variant:"outlined",value:D,onChange:t=>k(t.target.value),sx:{width:120}}),(0,a.jsxs)(g.A,{sx:{minWidth:100},children:[(0,a.jsx)(v.A,{children:s("currency")}),(0,a.jsx)(b.A,{value:E,label:s("currency"),onChange:t=>W(t.target.value),children:Object.keys(S).map(t=>(0,a.jsx)(C.A,{value:t,children:t},t))})]}),(0,a.jsx)(j.A,{type:"date",label:s("date"),variant:"outlined",InputLabelProps:{shrink:!0},value:M,onChange:t=>I(t.target.value)}),(0,a.jsx)(j.A,{label:s("note"),multiline:!0,rows:2,variant:"outlined",value:R,onChange:t=>_(t.target.value),sx:{flex:"1 1 200px",minWidth:200}}),(0,a.jsx)(c.A,{type:"submit",variant:"contained",sx:{alignSelf:"center"},children:s("addRecord")}),T&&(0,a.jsx)(c.A,{variant:"outlined",onClick:function(){T&&(w(T.type),k(String(T.amount)),W(T.currency),I(T.date),N([...T.tags]),_(T.note||""))},sx:{alignSelf:"center"},children:s("loadLastRecord")})]}),(0,a.jsxs)(i.A,{sx:{mt:2},children:[(0,a.jsx)(j.A,{fullWidth:!0,label:s("tagsPlaceholder"),variant:"outlined",value:P,onChange:t=>O(t.target.value),onCompositionStart:()=>L.current=!0,onCompositionEnd:()=>L.current=!1,onKeyDown:function(t){!L.current&&["Enter",","," "].includes(t.key)&&(t.preventDefault(),N([...F,...t.target.value.split(/[\s,]+/).filter(Boolean).map(t=>t.startsWith("#")?t.slice(1):t)]),O(""))}}),F.length>0&&(0,a.jsx)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:F.map(t=>(0,a.jsx)(y.A,{label:t,onDelete:()=>N(F.filter(n=>n!==t)),variant:"outlined",color:"primary"},t))})]})]})})});var D=l(19125),k=l(37124),E=l(28318),W=l(35840),M=l(57321);function I(){let t=(0,k.h)(),n=(0,E.Nc)(t,M.$i),l=(0,E.Nc)(t,M.O),{t:i}=(0,x.Bd)(),[s,o]=(0,r.useState)(n+1);return(0,a.jsxs)(h.A,{direction:"row",spacing:1,alignItems:"center",sx:{p:1},children:[(0,a.jsx)(c.A,{variant:"outlined",size:"small",onClick:function(){t.current.setPage(0),o(1)},disabled:0===n,children:i("firstPage")}),(0,a.jsx)(c.A,{variant:"outlined",size:"small",onClick:function(){n>0&&(t.current.setPage(n-1),o(s-1))},disabled:0===n,children:i("prevPage")}),(0,a.jsx)(W.h,{rowsPerPageOptions:[10,50,100]}),(0,a.jsx)(c.A,{variant:"outlined",size:"small",onClick:function(){n<l-1&&(t.current.setPage(n+1),o(s+1))},disabled:n>=l-1,children:i("nextPage")}),(0,a.jsx)(c.A,{variant:"outlined",size:"small",onClick:function(){t.current.setPage(l-1),o(l)},disabled:n>=l-1,children:i("lastPage")}),(0,a.jsx)(j.A,{size:"small",type:"number",value:s,onChange:t=>o(t.target.value),placeholder:i("gotoPagePlaceholder"),sx:{width:80}}),(0,a.jsx)(c.A,{variant:"outlined",size:"small",onClick:function(){let n=parseInt(s,10);isNaN(n)||(n=Math.max(1,Math.min(n,l)),t.current.setPage(n-1),o(n))},children:i("gotoPage")})]})}var P=l(7660);function O(t){let{records:n=[],onDeleteRecord:l,onOpenEditDialog:s,selectedIds:o=[],setSelectedIds:p,onBulkDelete:g,onOpenBulkEdit:f,onTagClick:m}=t,{t:A}=(0,x.Bd)(),j=function(){let{t}=(0,x.Bd)();return{noRowsLabel:t("noData"),columnMenuSortAsc:t("columnMenuSortAsc"),columnMenuSortDesc:t("columnMenuSortDesc"),columnMenuFilter:t("columnMenuFilter"),columnMenuHideColumn:t("columnMenuHideColumn"),columnMenuManageColumns:t("columnMenuManageColumns"),columnHeaderMenuTooltip:t("columnHeaderMenuTooltip"),filterPanelColumns:t("filterPanelColumns"),filterPanelOperator:t("filterPanelOperator"),filterPanelInputLabel:t("filterPanelInputLabel"),filterPanelInputPlaceholder:t("filterPanelInputPlaceholder")}}(),v=(0,r.useMemo)(()=>[{field:"type",headerName:A("type"),width:100,renderCell:t=>"income"===t.value?A("income"):A("expense")},{field:"amount",headerName:A("amount"),width:120},{field:"date",headerName:A("date"),width:130},{field:"tags",headerName:A("tag"),width:200,sortable:!1,renderCell:t=>{let n=t.value||[];return(0,a.jsx)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:n.map(t=>(0,a.jsx)(y.A,{label:t,variant:"outlined",size:"small",onClick:()=>{m&&m(t)}},t))})}},{field:"note",headerName:A("note"),flex:1,sortable:!1},{field:"action",headerName:A("action"),width:200,sortable:!1,renderCell:t=>{let n=t.row;return(0,a.jsxs)(h.A,{direction:"row",spacing:1,children:[(0,a.jsx)(c.A,{variant:"outlined",onClick:()=>s&&s(n),children:A("edit")}),(0,a.jsx)(c.A,{variant:"outlined",color:"error",onClick:()=>l&&l(n.id),children:A("delete")})]})}}],[A,m,l,s]);return(0,a.jsx)(d.A,{variant:"outlined",sx:{mb:3},children:(0,a.jsxs)(u.A,{children:[(0,a.jsxs)(h.A,{direction:"row",spacing:2,sx:{mb:2},children:[(0,a.jsx)(c.A,{variant:"outlined",onClick:function(){let t=n.map(t=>({type:t.type,amount:t.amount,date:t.date,tags:(t.tags||[]).join(", "),note:t.note})),l=P.Wp.json_to_sheet(t),a=P.Wp.book_new();P.Wp.book_append_sheet(a,l,"Records"),P._h(a,"Records.xlsx")},children:A("exportExcel")}),(0,a.jsx)(c.A,{variant:"outlined",disabled:0===o.length,onClick:g,children:A("bulkDelete")}),(0,a.jsx)(c.A,{variant:"outlined",disabled:0===o.length,onClick:f,children:A("bulkEdit")})]}),(0,a.jsx)(i.A,{sx:{height:600,width:"100%"},children:(0,a.jsx)(D.z,{rows:n,columns:v,checkboxSelection:!0,onRowSelectionModelChange:t=>{p&&p(t)},disableRowSelectionOnClick:!0,pagination:!0,pageSizeOptions:[10,50,100],localeText:j,slots:{pagination:I}})})]})})}var F=l(58671),N=l(36417),R=l(27753),_=l(26214),T=l(80906),B=l(10897);function L(t){let{open:n,onClose:l,onImported:i}=t,[s,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)({success:!1,error:""});function f(){h(!1)}function m(){d(null),null==l||l()}return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(F.A,{open:n,onClose:m,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(N.A,{children:"导入数据"}),(0,a.jsxs)(R.A,{children:[(0,a.jsx)(o.A,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"请上传包含 type,amount,date,tags,note 的Excel文件"}),(0,a.jsx)("input",{type:"file",accept:".xlsx, .xls",onChange:function(t){d(t.target.files[0])},style:{marginTop:"16px"}})]}),(0,a.jsxs)(_.A,{children:[(0,a.jsx)(c.A,{onClick:m,children:"取消"}),(0,a.jsx)(c.A,{variant:"contained",onClick:function(){if(!s){alert("请先选择文件");return}let t=new FileReader;t.onload=t=>{try{let n=new Uint8Array(t.target.result),l=P.LF(n,{type:"array"}),a=l.SheetNames[0],r=l.Sheets[a],s=P.Wp.sheet_to_json(r,{header:1});if(!s||s.length<=1){g({success:!1,error:"空文件或格式错误"}),h(!0);return}let o=s[0],c=o.indexOf("type"),d=o.indexOf("amount"),u=o.indexOf("date"),x=o.indexOf("tags"),f=o.indexOf("note");if(-1===c||-1===d||-1===u||-1===x||-1===f){g({success:!1,error:"模板字段不完整(type,amount,date,tags,note)"}),h(!0);return}let A=0,j=[];for(let t=1;t<s.length;t++){let n=s[t];if(!n||0===n.length)continue;let l=(n[c]||"").toString().trim(),a=n[d],r=n[u],i=function(t){if("number"==typeof t){let n=P.tF.parse_date_code(t),l=n.y.toString().padStart(4,"0"),a=n.m.toString().padStart(2,"0"),r=n.d.toString().padStart(2,"0");return"".concat(l,"-").concat(a,"-").concat(r)}if("string"==typeof t){let n=t.trim();if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n}return null}(r)||"",o=(n[x]||"").toString().trim(),h=(n[f]||"").toString().trim();if(!l||!a||!i){A++;continue}let g=parseFloat(a);if("income"!==l&&"expense"!==l||isNaN(g)||!/^\d{4}-\d{2}-\d{2}$/.test(i)){A++;continue}let m=o?o.split(/[\s,]+/).map(t=>t.startsWith("#")?t.slice(1):t):[],v={id:Date.now()+Math.floor(1e5*Math.random()),createdAt:Date.now(),updatedAt:Date.now(),type:l,amount:g,date:i,tags:m,note:h};(0,p.$1)(v),j.push(...m)}(function(t){if(!t||0===t.length)return;let n=(0,p.Pd)(),l=[...new Set(t)].filter(t=>!n.includes(t));l.length>0&&(0,p.On)(l)})(j),0===A?g({success:!0,error:""}):g({success:!1,error:"有 ".concat(A," 行数据导入失败")}),h(!0),null==i||i(),m()}catch(t){console.error(t),g({success:!1,error:t.message}),h(!0)}},t.readAsArrayBuffer(s)},children:"确认导入"})]})]}),(0,a.jsx)(T.A,{open:u,autoHideDuration:3e3,onClose:f,children:x.success?(0,a.jsx)(B.A,{severity:"success",onClose:f,children:"导入成功"}):(0,a.jsx)(B.A,{severity:"error",onClose:f,children:x.error||"导入失败"})})]})}var U=l(67663),z=l(1493),H=l(43145);let $=["USD","CNY","TWD","EUR","CHF"];function K(t){let{open:n,onClose:l,selectedIds:s,records:d,onRecordsUpdated:u,clearSelection:h}=t,{t:f}=(0,x.Bd)(),[m,A]=(0,r.useState)(""),[S,w]=(0,r.useState)(""),[D,k]=(0,r.useState)(""),[E,W]=(0,r.useState)(null),[M,I]=(0,r.useState)(""),[P,O]=(0,r.useState)([]),[T,B]=(0,r.useState)(""),L=(0,r.useRef)(!1);function K(){null==l||l(),A(""),w(""),k(""),W(null),I(""),O([]),B("")}return(0,a.jsxs)(F.A,{open:n,onClose:K,maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(N.A,{children:f("bulkEdit")}),(0,a.jsxs)(R.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(g.A,{sx:{minWidth:100},children:[(0,a.jsx)(v.A,{children:f("type")}),(0,a.jsxs)(b.A,{value:m,label:f("type"),onChange:t=>A(t.target.value),children:[(0,a.jsx)(C.A,{value:"",children:f("noChange")}),(0,a.jsx)(C.A,{value:"expense",children:f("expense")}),(0,a.jsx)(C.A,{value:"income",children:f("income")})]})]}),(0,a.jsx)(j.A,{type:"number",label:f("amount"),variant:"outlined",placeholder:f("noChange"),value:S,onChange:t=>w(t.target.value)}),(0,a.jsxs)(g.A,{sx:{minWidth:100},children:[(0,a.jsx)(v.A,{children:f("currency")}),(0,a.jsxs)(b.A,{value:D,label:f("currency"),onChange:t=>k(t.target.value),children:[(0,a.jsx)(C.A,{value:"",children:f("noChange")}),$.map(t=>(0,a.jsx)(C.A,{value:t,children:t},t))]})]}),(0,a.jsx)(U.$,{dateAdapter:z.h,children:(0,a.jsx)(H.l,{label:f("date"),value:E,onChange:t=>W(t)})}),(0,a.jsxs)(i.A,{children:[(0,a.jsx)(j.A,{label:f("tagsPlaceholder"),variant:"outlined",placeholder:f("noChange"),value:M,onChange:t=>I(t.target.value),onCompositionStart:()=>{L.current=!0},onCompositionEnd:()=>{L.current=!1,I(e.target.value)},onKeyDown:function(t){if(!L.current&&["Enter",","," "].includes(t.key)){t.preventDefault();let n=t.target.value.split(/[\s,]+/).filter(Boolean).map(t=>t.startsWith("#")?t.slice(1):t);O(t=>[...t,...n]),I("")}}}),P.length>0&&(0,a.jsx)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:P.map(t=>(0,a.jsx)(y.A,{label:t,onDelete:()=>O(P.filter(n=>n!==t)),variant:"outlined",color:"primary"},t))})]}),(0,a.jsx)(j.A,{label:f("note"),placeholder:f("noChange"),multiline:!0,rows:3,variant:"outlined",value:T,onChange:t=>B(t.target.value)}),(0,a.jsx)(o.A,{variant:"body2",color:"text.secondary",children:f("bulkEditDesc")})]}),(0,a.jsxs)(_.A,{children:[(0,a.jsx)(c.A,{onClick:K,children:f("cancel")}),(0,a.jsx)(c.A,{variant:"contained",onClick:function(){if(!s||0===s.length)return;let t=Date.now(),n={};if(m&&(n.type=m),S&&(n.amount=parseFloat(S)),D&&(n.currency=D),E){let t=E.getFullYear(),l=String(E.getMonth()+1).padStart(2,"0"),a=String(E.getDate()).padStart(2,"0");n.date="".concat(t,"-").concat(l,"-").concat(a)}P.length>0&&(n.tags=P),T.trim()&&(n.note=T.trim()),s.forEach(l=>{let a=d.find(t=>t.id===l);if(a){let l={...a,...n,updatedAt:t};(0,p.vL)(l)}}),null==u||u(),null==h||h(),K()},children:f("saveChanges")})]})]})}let Y={USD:1,CNY:.14,TWD:.032,EUR:1.07,CHF:1.12};function J(t){let{open:n,onClose:l,record:s,onSave:o}=t,{t:d}=(0,x.Bd)(),[u,h]=(0,r.useState)("expense"),[p,f]=(0,r.useState)(""),[m,A]=(0,r.useState)("USD"),[S,w]=(0,r.useState)(""),[D,k]=(0,r.useState)(""),[E,W]=(0,r.useState)([]),[M,I]=(0,r.useState)(""),P=(0,r.useRef)(!1);function O(t){if(t&&s){let t=Date.now(),n=Y[m]||1,l=parseFloat(p)||0,a={...s,type:u,amount:l,currency:m,convertedUSD:l*n,date:S,tags:[...E],note:M.trim(),updatedAt:t};null==o||o(a)}null==l||l()}return(0,r.useEffect)(()=>{s&&n&&(h(s.type),f(String(s.amount)),A(s.currency||"USD"),w(s.date),W([...s.tags]),k(""),I(s.note||""))},[s,n]),(0,a.jsxs)(F.A,{open:n,onClose:()=>O(!1),maxWidth:"sm",fullWidth:!0,children:[(0,a.jsx)(N.A,{children:d("editRecord")}),(0,a.jsxs)(R.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,a.jsxs)(g.A,{sx:{minWidth:100},children:[(0,a.jsx)(v.A,{children:d("type")}),(0,a.jsxs)(b.A,{value:u,label:d("type"),onChange:t=>h(t.target.value),children:[(0,a.jsx)(C.A,{value:"expense",children:d("expense")}),(0,a.jsx)(C.A,{value:"income",children:d("income")})]})]}),(0,a.jsx)(j.A,{type:"number",label:d("amount"),variant:"outlined",value:p,onChange:t=>f(t.target.value)}),(0,a.jsxs)(g.A,{sx:{minWidth:100},children:[(0,a.jsx)(v.A,{children:d("currency")}),(0,a.jsx)(b.A,{value:m,label:d("currency"),onChange:t=>A(t.target.value),children:Object.keys(Y).map(t=>(0,a.jsx)(C.A,{value:t,children:t},t))})]}),(0,a.jsx)(j.A,{type:"date",label:d("date"),variant:"outlined",InputLabelProps:{shrink:!0},value:S,onChange:t=>w(t.target.value)}),(0,a.jsxs)(i.A,{children:[(0,a.jsx)(j.A,{label:d("tagsPlaceholder"),variant:"outlined",value:D,onChange:t=>k(t.target.value),onCompositionStart:()=>{P.current=!0},onCompositionEnd:()=>{P.current=!1},onKeyDown:function(t){if(!P.current&&["Enter",","," "].includes(t.key)){t.preventDefault();let n=t.target.value.split(/[\s,]+/).filter(Boolean).map(t=>t.startsWith("#")?t.slice(1):t);W(t=>[...t,...n]),k("")}}}),E.length>0&&(0,a.jsx)(i.A,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:E.map(t=>(0,a.jsx)(y.A,{label:t,onDelete:()=>W(E.filter(n=>n!==t)),variant:"outlined",color:"primary"},t))})]}),(0,a.jsx)(j.A,{label:d("note"),multiline:!0,rows:3,variant:"outlined",value:M,onChange:t=>I(t.target.value)})]}),(0,a.jsxs)(_.A,{children:[(0,a.jsx)(c.A,{onClick:()=>O(!1),children:d("cancel")}),(0,a.jsx)(c.A,{variant:"contained",onClick:()=>O(!0),children:d("saveChanges")})]})]})}function V(){let{t}=(0,x.Bd)(),[n,l]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1),[m,A]=(0,r.useState)([]),[j,v]=(0,r.useState)(!1),[b,C]=(0,r.useState)(!1),[y,S]=(0,r.useState)(null),D=(0,r.useRef)(null);function k(){l((0,p.kV)())}(0,r.useEffect)(()=>{k()},[]);let{thisMonthExp:E,lastMonthExp:W,last7AvgExp:M,thisMonthInc:I,lastMonthInc:P,last7AvgInc:F,topTagsExp:N,topTagsInc:R}=(0,r.useMemo)(()=>{if(!Array.isArray(n)||0===n.length)return{thisMonthExp:0,lastMonthExp:0,last7AvgExp:0,thisMonthInc:0,lastMonthInc:0,last7AvgInc:0,topTagsExp:[],topTagsInc:[]};try{let t=new Date,l=t.getFullYear(),a=t.getMonth(),r=new Date(l,a,1),i=new Date(l,a+1,1),s=new Date(0===a?l-1:l,0===a?11:a-1,1),o=new Date(l,a,1),c=new Date(t.getTime()-6048e5),d=t=>"expense"===t.type,u=t=>"income"===t.type,h=0,x=0;n.forEach(t=>{let n=new Date(t.date);n>=r&&n<i&&(d(t)?h+=t.amount:u(t)&&(x+=t.amount))});let p=0,g=0;n.forEach(t=>{let n=new Date(t.date);n>=s&&n<o&&(d(t)?p+=t.amount:u(t)&&(g+=t.amount))});let f=0,m=0,A=0,j=0;n.forEach(n=>{let l=new Date(n.date);l>=c&&l<=t&&(d(n)?(f+=n.amount,m++):u(n)&&(A+=n.amount,j++))});let v=m>0?f/7:0,b=j>0?A/7:0,C={},y={};n.forEach(t=>{Array.isArray(t.tags)&&(d(t)?t.tags.forEach(n=>{C[n]||(C[n]=0),C[n]+=t.amount}):u(t)&&t.tags.forEach(n=>{y[n]||(y[n]=0),y[n]+=t.amount}))});let S=Object.entries(C).sort((t,n)=>n[1]-t[1]).slice(0,5).map(t=>{let[n,l]=t;return{tg:n,total:l}}),w=Object.entries(y).sort((t,n)=>n[1]-t[1]).slice(0,5).map(t=>{let[n,l]=t;return{tg:n,total:l}});return{thisMonthExp:h,lastMonthExp:p,last7AvgExp:v,thisMonthInc:x,lastMonthInc:g,last7AvgInc:b,topTagsExp:S,topTagsInc:w}}catch(t){return console.error("Error computing stats:",t),{thisMonthExp:0,lastMonthExp:0,last7AvgExp:0,thisMonthInc:0,lastMonthInc:0,last7AvgInc:0,topTagsExp:[],topTagsInc:[]}}},[n]);return(0,a.jsxs)(i.A,{sx:{backgroundColor:"#f7f9fc",minHeight:"100vh",py:4},children:[(0,a.jsxs)(s.A,{maxWidth:"lg",children:[(0,a.jsxs)(i.A,{sx:{textAlign:"center",mb:4},children:[(0,a.jsx)(o.A,{variant:"h4",sx:{fontWeight:"bold"},children:t("EZExpenses")}),(0,a.jsx)(o.A,{variant:"subtitle1",color:"text.secondary",children:t("poweredBy")})]}),(0,a.jsx)(i.A,{sx:{display:"flex",justifyContent:"flex-end",mb:2,gap:2},children:(0,a.jsx)(c.A,{variant:"outlined",onClick:()=>f(!0),children:t("importData")})}),(0,a.jsx)(w,{ref:D,onRecordsChange:k}),(0,a.jsx)(d.A,{variant:"outlined",sx:{mb:3},children:(0,a.jsxs)(u.A,{children:[(0,a.jsx)(o.A,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:t("expenseStats")}),(0,a.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-around",p:2,mb:2,backgroundColor:"#f5f5f5",borderRadius:1},children:[(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("currentMonthExpense")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:E.toFixed(2)})]}),(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("lastMonthExpense")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:W.toFixed(2)})]}),(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("last7DaysAverageExpense")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:M.toFixed(2)})]})]}),(0,a.jsx)(o.A,{variant:"subtitle1",sx:{mb:2,fontWeight:"bold"},children:t("incomeStats")}),(0,a.jsxs)(i.A,{sx:{display:"flex",justifyContent:"space-around",p:2,mb:2,backgroundColor:"#f5f5f5",borderRadius:1},children:[(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("currentMonthIncome")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:I.toFixed(2)})]}),(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("lastMonthIncome")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:P.toFixed(2)})]}),(0,a.jsxs)(i.A,{textAlign:"center",children:[(0,a.jsx)(o.A,{variant:"subtitle2",children:t("last7DaysAverageIncome")}),(0,a.jsx)(o.A,{variant:"h6",sx:{fontWeight:"bold"},children:F.toFixed(2)})]})]}),(N.length>0||R.length>0)&&(0,a.jsxs)(h.A,{direction:"row",spacing:1,alignItems:"center",flexWrap:"wrap",children:[(0,a.jsxs)(o.A,{variant:"subtitle2",sx:{mb:1},children:[t("commonTags"),":"]}),(0,a.jsxs)(i.A,{display:"flex",flexWrap:"wrap",gap:1,children:[N.map(t=>(0,a.jsxs)(c.A,{variant:"outlined",size:"small",onClick:()=>{var n;null===(n=D.current)||void 0===n||n.addTag(t.tg)},children:["#",t.tg," (-",t.total.toFixed(2),")"]},"exp-"+t.tg)),R.map(t=>(0,a.jsxs)(c.A,{variant:"outlined",size:"small",onClick:()=>{var n;null===(n=D.current)||void 0===n||n.addTag(t.tg)},children:["#",t.tg," (+",t.total.toFixed(2),")"]},"inc-"+t.tg))]})]})]})}),(0,a.jsx)(O,{records:n,onDeleteRecord:function(n){window.confirm(t("confirmDelete"))&&((0,p.LK)(n),k())},onOpenEditDialog:function(t){S(t),C(!0)},selectedIds:m,setSelectedIds:A,onBulkDelete:function(){0!==m.length&&window.confirm(t("confirmDelete"))&&(m.forEach(t=>(0,p.LK)(t)),A([]),k())},onOpenBulkEdit:function(){0!==m.length&&v(!0)}})]}),(0,a.jsx)(L,{open:g,onClose:()=>f(!1),onImported:k}),(0,a.jsx)(K,{open:j,onClose:function(){v(!1)},selectedIds:m,records:n,onRecordsUpdated:k,clearSelection:()=>A([])}),(0,a.jsx)(J,{open:b,onClose:function(){C(!1),S(null)},record:y,onSave:function(t){(0,p.vL)(t),k()}})]})}},47967:(t,n,l)=>{"use strict";l.d(n,{$1:()=>o,LK:()=>c,On:()=>h,Pd:()=>u,kV:()=>i,vL:()=>d});let a="all_tags_pool",r="bookkeeping_records";function i(){let t=localStorage.getItem(r);return t?JSON.parse(t):[]}function s(t){localStorage.setItem(r,JSON.stringify(t))}function o(t){let n=i();n.push(t),s(n)}function c(t){s(i().filter(n=>n.id!==t))}function d(t){let n=i();s(n=n.map(n=>n.id===t.id?t:n))}function u(){let t=localStorage.getItem(a);return t?JSON.parse(t):[]}function h(t){let n=[...u()];t.forEach(t=>{n.includes(t)||n.push(t)}),localStorage.setItem(a,JSON.stringify(n))}}},t=>{var n=n=>t(t.s=n);t.O(0,[524,214,37,804,564,441,517,358],()=>n(10643)),_N_E=t.O()}]);